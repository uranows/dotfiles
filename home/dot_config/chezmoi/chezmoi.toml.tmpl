# Source: home/dot_config/chezmoi/chezmoi.toml.tmpl
# Target: ~/.config/chezmoi/chezmoi.toml

# --- Windows Specific Mappings ---
{{ if eq .chezmoi.os "windows" -}}

# Map PowerShell Profile from apps/ directory
# Target path is relative to the user's home directory
["Documents/PowerShell/Microsoft.PowerShell_profile.ps1"]
    source = "apps/powershell/Microsoft.PowerShell_profile.ps1"
    type = "file" # Can be file or template

# Windows Terminal mapping removed - handled by run_once script

{{ end -}}

# --- Interpreters ---
# Explicitly tell chezmoi how to run .ps1 files on Windows
# Trying .ps1.tmpl key again, maybe needed internally despite rename?
[interpreters]
  [interpreters.".ps1.tmpl"] # Match files ending in .ps1.tmpl
    command = "powershell.exe"
    # Use common arguments to bypass profile loading and execution policy for the script run
    args = ["-NoProfile", "-NoLogo", "-ExecutionPolicy", "Bypass", "-File"]

# --- General chezmoi settings can go here ---
# Example: Use VS Code for editing
# [edit]
#   command = "code"
#   args = ["--wait"]

# Add other settings as needed (e.g., encryption, git config) 